{% extends 'domestic/base.html' %}
{% load static %}
{% load humanize %}
{% block head_css %}
    {{ block.super }}
    <link href="{% static 'styles/pages/search-results.css' %}"
          rel="stylesheet"
          type="text/css" />
{% endblock %}
{% block head_title %}Feedback Form{% endblock %}
{% block meta_title %}Feedback Form{% endblock %}
{% block content %}
    <section id="search-results-information"
             class="great govuk-!-padding-bottom-0">
        
    <div class="container govuk-!-padding-top-8">
        <h1 class="govuk-heading-l">Your feedback will help us improve the website</h1>
    </div>
</section>
<div class="results-wrapper">
    <div class="container search-results-container">
        <form action="{% url 'search:feedback' %}?{{ request.GET.urlencode }}"
              method="post">
            {% csrf_token %}
            {{ form.non_field_errors }}
            {{ form.result_found}}
            {{ form.search_target }}
            {{ form.from_search_query.as_hidden }}
            {{ form.from_search_page.as_hidden }}
            {{ form.contactable }}
            {{ form.contact_name }}
            {{ form.contact_email }}
            {{ form.contact_number }}
            <p class="margin-bottom-30 margin-top-60-l margin-top-45-m margin-top-30">
                Thanks for taking the time to help users of our site.
            </p>
            <div class="form-group{% if field.errors %} form-group-error{% endif %}">
                {% if form.captcha.errors %}<span class="error-message">{{ form.captcha.errors }}</span>{% endif %}
                {% if form.captcha.help_text %}<span class="form-hint">{{ form.captcha.help_text }}</span>{% endif %}
                {{ form.captcha }}
            </div>
            <input class="button primary-button" type="submit" value="Submit">
        </form>
    </div>
</div>
<script>
  // If JS is enabled, initially hide the contact details box
  contactDetails = document.getElementsByClassName("hide-on-page-load")
  radios = document.getElementsByClassName('govuk-radios__input')

  document.querySelectorAll('.hide-on-page-load').forEach(function(el) {
    el.style.display = 'none'
  });

  function check_if_checked(){
    if(document.getElementById("id_contactable_0").checked){
      document.querySelectorAll('.hide-on-page-load').forEach(function(el) {
        el.style.display = 'block'
      });
    } else {
      document.querySelectorAll('.hide-on-page-load').forEach(function(el) {
        el.style.display = 'none'
      });
    }
  }

  for (var i = 0; i < radios.length; i++) {
    radios[i].addEventListener('click', check_if_checked, false);
  }

</script>
{% endblock %}
