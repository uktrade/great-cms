{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load add_govuk_classes from content_tags %}
<div class="step-list ">
    <ol class="govuk-list govuk-list--number govuk-!-static-margin-left-5">
        {% for list_items in value.list_items %}
            {% if value.initial_heading_level == '2' %}
                <li class="step-list-h2">
                    <h2 class="govuk-heading-l govuk-!-padding-top-2">{{ list_items.value.title }}</h2>
                {% elif value.initial_heading_level == '3' %}
                    <li class="step-list-h3">
                        <h3 class="govuk-heading-m govuk-!-padding-top-2">{{ list_items.value.title }}</h3>
                    {% endif %}
                    {{ list_items.value.body }}
                    {% if list_items.value.nested_items %}
                        <ol class="govuk-list govuk-list--number">
                            {% for nested_item in list_items.value.nested_items %}
                                {% if value.initial_heading_level == '2' %}
                                    <li class="step-list-h3">
                                        <h3 class="govuk-heading-m govuk-!-padding-top-3">{{ nested_item.value.title }}</h3>
                                    {% elif value.initial_heading_level == '3' %}
                                        <li class="step-list-h4">
                                            <h4 class="govuk-heading-s">{{ nested_item.value.title }}</h4>
                                        {% endif %}
                                        {{ nested_item.value.body }}
                                    </li>
                                {% endfor %}
                            </ol>
                        {% endif %}
                    </li>
                {% endfor %}
            </ol>
        </div>
