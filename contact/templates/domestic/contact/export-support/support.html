{% extends 'domestic/base.html' %}
{% load breadcrumbs from component_tags %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load static %}
{% load add_govuk_classes from content_tags %}

{% block head_title %}Support{% endblock %}

{% block body_js %}
  {{ block.super }}
{% endblock %}

{% block content %}
  <div class="great {% if request.GET.topic %}great-bg-lighter-grey{% else %}great-bg-white{% endif %}">
    <div class="great-container">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                {% if request.GET.topic %}
                    <p class="govuk-body govuk-!-margin-top-7 govuk-!-margin-bottom-0">Support</p>
                    <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">{{ request.GET.topic }}</h1>
                {% else %}
                <div class="govuk-grid-row great-height-360-desktop great-overflow-hidden">
                    <div class="govuk-grid-column-one-third">
                        {% if page.page_title %}
                            <h1 class="govuk-heading-xl govuk-!-margin-top-8 govuk-!-margin-bottom-2">{{ page.page_title }}</h1>
                        {% endif %}

                        {% if page.page_teaser %}
                            {{ page.page_teaser| richtext | add_govuk_classes}}
                        {% endif %}
                    </div>
                    {% if page.hero_image %}
                    <div class="govuk-grid-column-two-thirds">
                        {% image page.hero_image width-500 as hero_image %}
                        <img src="{{ hero_image.url }}" alt="{{ hero_image.alt }}" class="great-full-width" />
                    </div>
                    {% endif %}
                </div>
                {% endif %}
                {% if page.page_body %}
                    {% if request.GET.topic %}
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-three-quarters">
                            <div class="govuk-!-padding-top-6 great-display-flex-desktop great-card-wrapper">
                                {% include 'domestic/contact/export-support/includes/topic-landing-card.html' with cards=page.page_body %}
                            </div>
                            <div class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white great-display-flex-desktop great-related-items">
                                {% include 'domestic/contact/export-support/includes/related-items.html' with items=page.page_body %}
                            </div>
                        </div>
                        <div class="govuk-grid-column-one-quarter govuk-!-padding-top-6">
                            {% include 'domestic/contact/export-support/includes/sidebar-items.html' with items=page.page_body %}
                        </div>
                    </div>
                    {% else %}
                    <div class="great-full-width-bar great-bg-lighter-grey">
                        <div class="govuk-!-padding-top-6 govuk-!-padding-bottom-9 great-display-flex-desktop great-card-wrapper">
                            {% include 'domestic/contact/export-support/includes/topic-card.html' with topics=page.page_body %}
                        </div>
                    {% endif %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
  </div>
{% endblock %}
