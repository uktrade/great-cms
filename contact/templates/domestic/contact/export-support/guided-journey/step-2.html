{% extends 'domestic/contact/export-support/base.html' %}
{% load static %}
{% block head_title %}Export support for UK businesses{% endblock %}
{% block content %}
    <div class="great great-min-height-500">
        <div class="great-container govuk-!-padding-top-4">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    <div class="great-bg-white govuk-!-padding-6 govuk-!-margin-bottom-4 great-ds-box-shadow great-ds-widget-container">
                        <div class="govuk-grid-row">
                            <div class="govuk-grid-column-one-half">
                                <form method="post" autocomplete="off">
                                    {% csrf_token %}
                                    <input type="hidden" id="commodity_name" name="commodity_name" value="{{ session_data.commodity_name }}" />
        
                                    <h1>
                                        <label class="govuk-heading-l govuk-!-margin-bottom-4" for="hs_code">
                                            Choose your commodity code
                                        </label>
                                    </h1>
        
                                    <p class="govuk=body">
                                        All goods have a commodity (HS) code. You'll need this for your export paperwork, and we can use it to show you relevant content.
                                    </p>
        
                                    <div class="great-text-select--arrow great-text-select--arrow-max-500">
                                        <select class="govuk-select great-select great-select--max-500" name="hs_code" id="hs_code">
                                            {% for commodity in commodities %}
                                                <option value="{{ commodity.hs_code }}" data-commodity-name="{{ commodity.title }}" {% if session_data.hs_code == commodity.hs_code %}selected{% endif %}>{{ commodity.title }}{% if commodity.hs_code != '' %} ({{ commodity.hs_code }}){% endif %}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
        
                                    <div class="govuk-inset-text govuk-!-margin-top-4 govuk-!-margin-bottom-4">
                                        If you don't export physical goods, or your product isn't listed, choose 'skip'.
                                    </div>
                                
                                    {% include 'domestic/contact/export-support/includes/continue-save-button.html' %}
                                    {% include 'domestic/contact/export-support/includes/skip-button.html' with url='/guided-journey/step-3?is_commodity_code_skipped=True' %}
                                </form>
                            </div>
                        </div>
                    </div>

                    {% if session_data.sic_description %}
                    <div class="great-bg-white govuk-!-padding-6 govuk-!-margin-bottom-9 great-ds-box-shadow great-ds-widget-container">
                        <h2 class="govuk-heading-s govuk-!-margin-bottom-2 govuk-!-padding-right-9 govuk-!-margin-right-9">{{ session_data.sic_description }}</h2>
                        <p class="govuk-body govuk-!-margin-bottom-0">Part of the <strong class="great-font-bold">{{ session_data.sector }}</strong> sector.</p>
                        {% include 'domestic/contact/export-support/includes/change-button.html' with url='/guided-journey/step-1/edit?return_to_step=2' %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block body_js %}
    {{ block.super }}
    <script type="text/javascript">
        document.querySelector('#hs_code').addEventListener('change', (e) => {
            document.querySelector('[name="hs_code"]').value = e.target.value;
            document.querySelector('[name="commodity_name"]').value = e.target[e.target.selectedIndex].dataset.commodityName;
        });
    </script> 
{% endblock %}