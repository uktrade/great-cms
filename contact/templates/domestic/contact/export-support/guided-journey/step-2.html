{% extends 'domestic/contact/export-support/base.html' %}
{% load static %}
{% block head_title %}Export support for UK businesses{% endblock %}
{% block content %}
    <div class="great">
        <div class="great-container govuk-!-padding-top-4">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full great-grid-column-seven-twelfths">
                    <h1 class="govuk-heading-xl govuk-!-margin-bottom-5">Export support for UK businesses</h1>
                    {% if session_data.sic_description %}
                    <div class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white">
                        <h2 class="govuk-heading-s">What does your company make or do?</h2>
                        <p class="govuk-body">{{ session_data.sic_description }} <a href="{% url 'core:guided-journey-step-1-edit' %}?return_to_step=2" class="govuk-link">(Change)</a></p>
                        <p class="govuk-body govuk-!-margin-bottom-0">Your sector is <strong class="great-font-bold">{{ session_data.sector }}</strong></p>
                    </div>
                    {% endif %}
                    <form method="post" autocomplete="off" class="great-min-height-500">
                        {% csrf_token %}
                        <input type="hidden" id="commodity_name" name="commodity_name" />
                        <div class="govuk-!-padding-6 great-bg-white govuk-!-margin-bottom-6">
                            <h2 class="govuk-label-wrapper">
                                <label class="govuk-label govuk-label--l" for="sic_description">
                                    Select the best commodity match
                                </label>
                            </h2>
                            <div class="great-text-select--arrow">
                                <select class="govuk-select great-select" name="hs_code" id="hs_code">
                                    {% for commodity in commodities %}
                                        <option value="{{ commodity.hs_code }}" data-commodity-name="{{ commodity.title }}">{{ commodity.title }} ({{ commodity.hs_code }})</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" class="govuk-button great-min-width-250-desktop">{{ button_text }}</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block body_js %}
    {{ block.super }}
    <script type="text/javascript">
        document.querySelector('#hs_code').addEventListener('change', (e) => {
            document.querySelector('[name="hs_code"]').value = e.target.value;
            document.querySelector('[name="commodity_name"]').value = e.target[e.target.selectedIndex].dataset.commodityName;
        });
    </script> 
{% endblock %}