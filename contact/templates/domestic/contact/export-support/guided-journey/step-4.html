{% extends 'domestic/contact/export-support/base.html' %}
{% load static %}
{% block head_title %}Export support for UK businesses{% endblock %}
{% block content %}
    <div class="great">
        <div class="great-container govuk-!-padding-top-4">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full great-grid-column-seven-twelfths govuk-!-margin-bottom-5">
                    <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">Export support for UK businesses</h1>

                    {% if session_data.sic_description %}
                    <div class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white">
                        <h2 class="govuk-heading-s">What does your company make or do?</h2>
                        <p class="govuk-body">{{ session_data.sic_description }} <a href="{% url 'core:guided-journey-step-1-edit' %}?return_to_step=4" class="govuk-link">(Change)</a></p>
                        <p class="govuk-body govuk-!-margin-bottom-0">Your sector is <strong class="great-font-bold">{{ session_data.sector }}</strong></p>
                    </div>
                    {% endif %}

                    {% if session_data.exporter_type == 'goods' and session_data.hs_code %}
                    <div class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white">
                        <h2 class="govuk-heading-s">Your commodity match</h2>
                        <p class="govuk-body">{{session_data.commodity_name}}</p>
                        <p class="govuk-body">Your commodity code is <strong class="great-font-bold">{{ session_data.hs_code }}</strong> <a href="{% url 'core:guided-journey-step-2-edit' %}?return_to_step=4" class="govuk-link">(Change)</a></p>
                    </div>
                    {% endif %}

                    {% if session_data.market %}
                        {% include 'domestic/contact/export-support/includes/market-widget.html' with market=session_data.market related_markets=related_markets %}
                    {% endif %}

                    {% if not session_data.market %}
                    <div class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white">
                        {% include 'domestic/contact/export-support/includes/suggested-markets-widget.html' with suggested_markets=suggested_markets %}
                    </div>
                    {% endif %}

                    {% if session_data.sector %}
                        {% include 'domestic/contact/export-support/includes/sector-promo-widget.html' %}
                    {% endif %}

                    {% if session_data.market %}
                        {% include 'domestic/contact/export-support/includes/market-promo-widget.html' %}
                    {% endif %}

                    <div>
                        {% include 'domestic/contact/export-support/includes/ukea-widget.html' %}
                    </div>

                    {% if session_data.exporter_type == 'goods' and session_data.hs_code %}
                    <div>
                        {% include 'domestic/contact/export-support/includes/duties-and-taxes-widget.html' %}
                    </div>
                    {% endif %}

                    <div>
                        {% include 'domestic/contact/export-support/includes/trade-barriers-widget.html' %}
                    </div>

                    <div>
                        {% include 'domestic/contact/export-support/includes/visa-and-travel-widget.html' %}
                    </div>

                    <div>
                        {% include 'domestic/contact/export-support/includes/exopps-widget.html' %}
                    </div>

                    <form method="post" autocomplete="off" id="subject-of-enquiry-form" class="govuk-!-margin-bottom-6 govuk-!-padding-6 great-bg-white govuk-!-margin-top-5">
                        {% csrf_token %}

                        {% for field in form.visible_fields %}
                            <div class="govuk-form-group govuk-!-margin-bottom-7 {% if field.errors %}govuk-form-group--error{% endif %}">
                                {% include 'domestic/contact/includes/govuk-form-field.html' with field=field %}
                            </div>
                        {% endfor %}

                        <div class="govuk-!-margin-top-5 govuk-!-margin-bottom-7">
                            <a href="" id="change-category-button" class="govuk-link"></a>
                        </div>

                        <button type="submit" class="govuk-button great-min-width-250-desktop">{{ button_text }}</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body_js %}
    {{ block.super }}
    <script type="text/javascript">
        if ('{{ session_data.exporter_type}}' == 'service') {
            const excluded_category = document.querySelector('[data-filter="/support/logistics"]');

            if (excluded_category) {
                excluded_category.style.display = 'none';
            }
        }
    </script>
{% endblock %}