{% load to_json %}

<script type="text/javascript">
  magna.businessRisks({
    element: document.getElementById('business-risks'),
    model_name: 'businessrisks',
    formFields: {{ business_risks|to_json }},
    formData: {
      risk_extras: {
        placeholder: "Add some text",
        tooltip: {
          content: `<p>Describe what the risk is and how it can happen.</p>`
        },
        example: {
          content: "Machine breakdown in the Dove gin distillery.",
          bgColour: "white",
        },
      },
      likelihood_extras: {
        tooltip: {
          content: `<p>This is the chance of a specific risk that you have highlighted occurring.</p>`
        },
      },
      impact_extras: {
        tooltip: {
          content: `<p>The risk impact is an estimation of the potential losses to your business, the higher the loss the higher the impact.</p>`
        },
      },
      contingency_plan_extras: {
        label: "Contingency plan",
        placeholder: "Add some text",
        tooltip: {
          content: `<p>This is a plan designed to prepare for an event that is outside the usual plan. A contingency plan makes sure you are prepared for any disruptive events that are thrown your way.</p>`
        },
        example: {
          content: "Our equipment is serviced regularly to make sure problems are spotted early. We also have an engineering company who we can call out at any time of the day in case of any issues.",
          bgColour: "white",
        },
      },
    },
    risk_likelihood_options: {{ risk_likelihood_options|to_json }},
    risk_impact_options: {{ risk_impact_options|to_json }},
    companyexportplan: {{ export_plan.pk }},
    lesson: magna.formatLessonLearned({{ lesson_details|to_json }}, {{ current_section|to_json}}, 0),
  })
</script>
