{% load to_json %}

<script type="text/javascript">
  magna.adaptToTargetMarketForm({
    element: document.getElementById('adapt-to-target-market'),
    field: 'adaptation_target_market',
    formData: {{ form_initial|safe }},
    formFields: [
      {
        name: 'labelling',
        label: 'Labelling',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: `<p>
          Labelling is used to inform the consumer about the product you are selling to them.
          Labelling will need to be changed to fit into the market you are selling to. For example some pictures and colours may not be appropriate for certain markets.
          You will have to research what the requirements are so your products have the correct labels for your target market.
        </p>`,
      },
      {
        name: 'packaging',
        label: 'Packaging',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: `<p>
          Packaging provides protection for your product and prepares your product to be safely stored and transported.
          The information you need to include on your packaging will change depending on the market.
          You will have to research packaging requirements for your target market to avoid your products becoming damaged, lost or rejected.
        </p>`,
      },
      {
        name: 'size',
        label: 'Size',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: `<p>
          Standard product sizes vary by country depending on factors like buying habits in each market.
          You will have to research the size of products sold in this market so you meet customer needs for your target market.
        </p>`,
      },
      {
        name: 'standards',
        label: 'Product changes to comply with standards',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: `<p>
          Your product will have to comply with local standards, if it does not comply it will not be allowed to be sold.
          You will have to research standards relevant to your product to make sure they are compliant.
        </p>`,
      },
      {
        name: 'translations',
        label: 'Translations',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: `<p>
          Some markets will require you by law to label and package your products in the local language.
          You will have to research the language requirements for your market so your product labels comply with language requirements.
        </p>`,
      },
      {
        name: 'other_changes',
        label: 'Other changes',
        field_type: 'Textarea',
        placeholder: 'Describe changes',
        tooltip: null,
      },
    ],
    companyexportplan: {{ export_plan.pk }}
  })

  magna.documentsForTargetMarketForm({
    element: document.getElementById('documents-for-target-market'),
    field: 'adaptation_target_market',
    formData: {{ form_initial|safe }},
    formDataUserDocs: {{ target_market_documents|to_json }},
    companyexportplan: {{ export_plan.pk }}
  })

  magna.statsForYourTargetMarket({
    element: document.getElementById('stats-for-target-market'),
    languages: {{ language_data|safe }},
    infoMomenent: `To find out what product alterations and documents you might need to visit <a href="{{ check_duties_link|safe }}" target="_blank"
                rel="noopener noreferrer">Check how to export goods</a> service and choose the commodity code that best matches your product.`,
  })
</script>
