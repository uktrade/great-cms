{% extends 'domestic/base.html' %}
{% load static %}
{% load event_list_buttons %}
{% load wagtailcore_tags %}
{% load breadcrumbs from component_tags %}
{% load pagination from component_tags %}
{% load replace_underscores from component_tags %}
{% load append_past_year_seperator from component_tags %}
{% load add_govuk_classes from content_tags %}

{% block head_title %}Events â€“ {{ event.name }}{% endblock %}
{% block content %}
    <div class="great great-bg-white">
        <div id="breadcrumbs"
             class="great-display-from-tablet great-bg-light-blue">
            {% breadcrumbs event.name %}
            <a href="/">great.gov.uk</a>
            <a href="../">Events</a>
        {% endbreadcrumbs %}
    </div>
    <section class="great govuk-!-padding-top-9 govuk-!-padding-bottom-6">
        <div class="great-container event-details-header-container ">
            <div class="event-details-header-info govuk-grid-column-two-thirds-from-desktop govuk-!-static-padding-0">
                <h2 class="govuk-caption-l">{{ event.format|replace_underscores }} event</h4>
                <h1 class="govuk-heading-l govuk-!-static-margin-0">{{ event.name }}</h2>
                <time class="govuk-!-static-padding-top-2" datetime="{{event.start_date|date:"Y-m-d" }}T{{event.start_date|time:"H:i:s" }}{{ event.start_date|date:"O" }}">
                    {{ event.start_date|date:"l" }} {{ event.start_date|date:"j F" }} at {{ event.start_date|date:"g:iA"|lower }}
                </time>
                <div class="govuk-!-padding-top-2">{% event_list_badges event %}</div>
            </div>
            <div class="event-details-header-logo">
                <img class="ea-logo" src="/static/images/uk-export-academy-logo.svg" alt="UK Export Academy logo" />
            </div>
        </div>
    </section>
    {% include './includes/event_details_banner.html'%}
    <section class="great great-bg-white govuk-!-static-padding-top-4 event-details-main-content govuk-!-static-padding-bottom-4 ">
        <div class="great-container">
            <div class="govuk-grid-column-two-thirds-from-desktop govuk-!-static-padding-0">
                <div class="event-metadata govuk-!-static-padding-top-2">
                    <div>
                        <dl class="govuk-summary-list govuk-summary-list--no-border">
                            <div class="govuk-summary-list__row">
                                <dt class="govuk-summary-list__key govuk-!-margin-0 govuk-!-padding-bottom-1 govuk-!-padding-top-1">Duration</dt>
                                <dd class="govuk-summary-list__value govuk-!-margin-0 govuk-!-padding-bottom-1 govuk-!-padding-top-1">
                                    {{ event.start_date|timesince:event.end_date }}
                                </dd>
                            </div>
                            <div class="govuk-summary-list__row">
                                <dt class="govuk-summary-list__key govuk-!-margin-0 govuk-!-padding-bottom-1 govuk-!-padding-top-1">Content</dt>
                                <dd class="govuk-summary-list__value govuk-!-margin-0 govuk-!-padding-bottom-1 govuk-!-padding-top-1">
                                    {% for type in event_types %}
                                        <a class="govuk-link  {% if not forloop.last %}govuk-!-static-padding-right-1{% endif %}"
                                           href='/export-academy/events/?type={{ type|lower }}'>{{ type }}</a>
                                    {% endfor %}
                                </dd>
                            </div>
                        </dl>
                    </div>
                </div>
                {% if event.description %}
                    <div class="event-details-summary govuk-!-static-padding-top-6 govuk-!-static-padding-bottom-4">
                        <p class="govuk-!-static-margin-0">{{ event.description }}</p>
                    </div>
                {% endif %}
                {% if event.outcomes %}
                    <div class="event-details-what-you-will-learn govuk-!-static-padding-bottom-6">
                        <h2 class="govuk-heading-m">What you will learn</h2>
                        <div class="richtext">
                            {% filter add_govuk_classes %}
                                {{ event.outcomes|richtext }}
                            {% endfilter %}
                        </div>
                    </div>
                {% endif %}
                {% if event.description_long %}
                    <div class="event-details-description govuk-!-static-padding-bottom-6">
                        <h2 class="govuk-heading-m">Description</h2>
                        <div class="richtext">
                            {% filter add_govuk_classes %}
                                {{ event.description_long|richtext }}
                            {% endfilter %}
                        </div>
                    </div>
                {% endif %}
                {% if speakers %}
                    <div class="event-details-speakers govuk-!-static-padding-bottom-6">
                        <h2 class="govuk-heading-m govuk-!-static-margin-0">Speakers</h2>
                        {% for speaker in speakers %}
                            <h3 class="govuk-heading-s govuk-!-static-padding-bottom-2 govuk-!-static-padding-top-4 govuk-!-static-margin-0">{{ speaker.name }}</h3>
                            <p class='job-title govuk-!-static-margin-0 govuk-!-static-padding-bottom-2'>
                                {{ speaker.role }}, {{ speaker.organisation }}
                            </p>
                            <div class="richtext">
                                {% filter add_govuk_classes %}
                                    {{ speaker.description|richtext }}
                                {% endfilter %}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
{% endblock %}
