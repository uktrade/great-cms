{% extends 'domestic/base.html' %}
{% load static %}
{% load event_list_buttons %}
{% load wagtailcore_tags %}
{% load breadcrumbs from component_tags %}
{% load pagination from component_tags %}
{% load replace_underscores from component_tags %}
{% load append_past_year_seperator from component_tags %}
{% load video_tags %}
{% block head_title %}Events â€“ {{ event.name }}{% endblock %}
{% block content %}
    {% load add_govuk_classes from content_tags %}
    <div class="great great-bg-white">
        <div id="breadcrumbs"
             class="great-display-from-tablet great-bg-light-blue">
            {% breadcrumbs event.name %}
            <a href="/">great.gov.uk</a>
            <a href="/events">events</a>
        {% endbreadcrumbs %}
    </div>
    <section class="govuk-!-padding-top-9 govuk-!-padding-bottom-6">
        <div class="great-container event-details-header-container">
            <div class="event-details-header-info">
                <h4>{{ event.format|replace_underscores }} event</h4>
                <h2>{{ event.name }}</h2>
                <ul>
                    <li>
                        <time>
                            {{ event.start_date|date:"D" }} {{ event.start_date|date:"j M" }} at {{ event.start_date|date:"g:iA"|lower }}
                        </time>
                    </li>
                    {% if event.location %}<li>{{ event.location }}</li>{% endif %}
                </ul>
                {% event_list_badges event %}
            </div>
            <div class="event-details-header-logo">
                <img class="ea-logo" src="/static/images/uk-export-academy-logo.svg" />
            </div>
        </div>
    </section>
    <section class="great-bg-light-blue govuk-!-static-padding-bottom-0">
        <div class="govuk-!-static-padding-top-4 govuk-!-static-padding-bottom-4 great-container">
            {% if ended %}
                <div class="event-warning-wrapper">
                    <i class="fa fa-exclamation-circle"></i><strong class="govuk-warning-text__text govuk-!-static-padding-left-0">
                        <span class="govuk-warning-text__assistive">Warning</span>
                        This event has ended
                    </strong>
                    {% if has_video %}
                        <a class="govuk-link"
                           href="/export-academy/event/{{ event.id }}">Watch video recording</a>
                    {% endif %}
                </div>
            {% elif event.closed %}
                <div class="event-warning-wrapper">
                    <i class="fa fa-exclamation-circle"></i><strong class="govuk-warning-text__text govuk-!-static-padding-left-0">
                        <span class="govuk-warning-text__assistive">Warning</span>
                        This event is closed
                    </strong>
                    <a class="govuk-link" href="/export-academy/events">View more events</a>
                    {% if has_video %}
                        <a class="govuk-link govuk-!-static-padding-left-2"
                           href="/export-academy/event/{{ event.id }}">Watch video recording</a>
                    {% endif %}
                </div>
            {% else %}
                {% event_list_buttons event %}
            {% endif %}
        </div>
    </section>
    <section class="great-bg-white govuk-!-static-padding-top-4 event-details-main-content govuk-!-static-padding-bottom-4 ">
        <div class="great-container">
            <div class="govuk-grid-column-two-thirds-from-desktop govuk-!-static-padding-0">
                <div class="event-metadata govuk-!-static-padding-bottom-7 govuk-!-static-padding-top-2">
                    <div>
                        <p>Duration</p>
                        <p>{{ event.start_date|timesince:event.end_date }}</p>
                    </div>
                    <div>
                        <p>Content</p>
                        <div class="event-details-tags">
                            {% for type in event_types %}
                                <a class="govuk-link  {% if not forloop.last %}govuk-!-static-padding-right-1{% endif %}"
                                   href='/export-academy/events/?type={{ type|lower }}'>{{ type }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% if event.description %}
                    <div class="event-details-summary govuk-!-static-padding-top-6 govuk-!-static-padding-bottom-4">
                        <p class="govuk-!-static-margin-0">{{ event.description }}</p>
                    </div>
                {% endif %}
                {% if event.outcomes %}
                    <div class="event-details-what-you-will-learn govuk-!-static-padding-bottom-6">
                        <h3 class="govuk-!-static-padding-bottom-4">What you will learn</h3>
                        <div class="richtext">
                            {% filter add_govuk_classes %}
                                {{ event.outcomes }}
                            {% endfilter %}
                        </div>
                    </div>
                {% endif %}
                {% if event.description_long %}
                    <div class="event-details-description govuk-!-static-padding-bottom-6">
                        <h3 class="govuk-!-static-padding-bottom-4">Description</h3>
                        <div class="richtext">
                            {% filter add_govuk_classes %}
                                {{ event.description_long }}
                            {% endfilter %}
                        </div>
                    </div>
                {% endif %}
                {% if event__speaker and event__speaker|length > 1 %}
                    <div class="event-details-speakers govuk-!-static-padding-bottom-6">
                        <h3 class="govuk-!-static-padding-bottom-2 govuk-!-static-padding-bottom-4">Speakers</h3>
                        {% for speaker in event__speaker %}
                            <h5 class="govuk-!-static-padding-bottom-2">{{ speaker.name }}</h5>
                            <p class='job-title govuk-!-static-margin-0 govuk-!-static-padding-bottom-2'>
                                {{ speaker.role }}, {{ speaker.organisation }}
                            </p>
                            <div class="richtext">
                                {% filter add_govuk_classes %}
                                    {{ speaker.description }}
                                {% endfilter %}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
</div>
{% endblock %}
