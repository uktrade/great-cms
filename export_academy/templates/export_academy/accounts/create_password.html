{% extends 'export_academy/accounts/base.html' %}
{% load wagtailcore_tags %}
{% block form %}
    <h1 class="govuk-heading-m govuk-!-margin-top-3">Choose a password</h1>
    <p class="govuk-!-margin-bottom-6">This is your UK Export Academy registered email address.</p>
    {% csrf_token %}
    <label class="govuk-label">
        Email address
        <p class="govuk-!-margin-top-3 govuk-!-margin-bottom-6">{{ form.initial.email }}</p>
    </label>
    {% for field in form.visible_fields %}
        <div class="govuk-form-group {% if field.errors %}govuk-form-group--error govuk-!-margin-top-6{% endif %}">
            {% include 'domestic/contact/includes/govuk-form-field.html' with field=field %}
        </div>
    {% endfor %}
    {% for field in form.hidden_fields %}{{ field }}{% endfor %}
    {% if bgs_site %}
        <div class="{% if form.agree_terms.errors %} govuk-form-group--error{% endif %}">
            {% for error in form.agree_terms.errors %}
                <p class="govuk-error-message" role="alert">
                    <span class="govuk-visually-hidden">Error:</span> {{ error }}
                </p>
            {% endfor %}
            <div class="govuk-checkboxes" data-module="govuk-checkboxes">
                <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input"
                           id="agree_terms"
                           name="agree_terms"
                           type="checkbox"
                           value="agree_terms" />
                    <label class="govuk-label govuk-checkboxes__label" for="agree_terms">
                        I have read and agree to the terms and conditions.
                    </label>
                </div>
            </div>
            <p class="govuk-body govuk-!-margin-top-2">
                Read our
                <a class="govuk-link" href="/privacy-and-cookies/">privacy notice</a> to understand how we use your personal information.
            </p>
        </div>
    {% else %}
        <p class="govuk-!-margin-bottom-2">
            By signing up, you agree to our
            <a class="govuk-link" href="{% slugurl 'terms-and-conditions' %}">terms and conditions</a> and
            <a class="govuk-link" href="{% slugurl 'privacy' %}">privacy notice</a>
        </p>
    {% endif %}
    <button type="submit"
            class="govuk-button govuk-!-margin-top-6 great-width-auto">Sign up</button>
{% endblock %}
{% block small_screen_heading %}{{ heading }}{% endblock %}
{% block left_panel_heading %}{{ heading }}{% endblock %}
{% block left_panel_content %}
    {% include 'export_academy/accounts/includes/existing_user_body_text.html' %}
{% endblock %}
