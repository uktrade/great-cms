{% extends 'domestic/base.html' %}
{% load static %}
{% load event_list_buttons %}

{% block head_title %}Upcoming events{% endblock %}

{% block content %}
    {% block hero %}
        {% with content_snippet as hero %}
            {% include 'components/hero.html' with image=hero.image hero_title=hero.title hero_text=hero.text %}
        {% endwith %}
    {% endblock %}

            <div id="event-list" class="column-three-quarters-xl" >
                <h1 class="heading-xlarge">Upcoming events</h1>
                {% regroup object_list|dictsort:"start_date" by start_date|date:"l d/m/Y" as events_by_date %}
                <ul>
                    {% for event_by_date in events_by_date %}
                    <li>
                        <h4>{{ event_by_date.grouper }}</h4>
                        <ul>
                            {% for event in event_by_date.list %}
                            <li>
                                <h5>{{ event.start_date|date:"fa" }}</h5>
                                <h6>{{ event.types.all|join:" | "}}</h6>
                                <h6>{{ event.format }}</h6>
                                <h6>{{ event.name }}</h6>
                                <h6>Duration: {{ event.start_date|timesince:event.end_date }}</h6>
                                <p>{{ event.description|truncatechars:200 }}</p>
                                {% event_list_buttons event %}
                            </li>
                            {% endfor %}
                        </ul>
                    </li>
                    <hr>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</section>
{% endblock %}
