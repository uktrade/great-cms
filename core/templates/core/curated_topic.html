{% load wagtailcore_tags %}
{% load format_timedelta from content_tags %}
<div class="grid" id="{{topic_id}} test_container">

    <div class="learn__topic-item-details c-1-3-l">
        <h2 class="learn__topic-item-title h-m p-t-0">{{ value.title }}</h2>
    </div>
    <ul class="learn__lessons-list c-2-3-l">
        {% for item in value.lessons_and_placeholders %}
            {% if item.block_type == 'lesson' %}
            {% with item.value as page %}
            <li class="learn__lesson-item">
                <a class="learn__lesson-item-link h-xs" href="{% pageurl page %}" title="{{ page.title }}">
                    {{ page.title }}
                    {% if page.id in lesson_completion_data %}
                    <span class="button button--quaternary button--small f-r">
                        Completed
                    </span>
                    {% else %}
                    <div class="learn__topic-item-read-time body-l-b">
                        <span class="h-s p-t-0 m-r-xs"><i class="fas fa-clock"></i></span>
                        <span class="f-r">{{ page.specific.estimated_read_duration|format_timedelta }}</span>
                    </div>
                    {% endif %}
                </a>
            </li>
            {% endwith %}
            {% elif item.block_type == 'placeholder'%}
                {% include_block item %}
            {% endif %}
        {% endfor %}
    </ul>
</div>
