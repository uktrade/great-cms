
{% load wagtailcore_tags %}

{% if case_study %}
<div id="case_study"></div>

{% block body_js %}
    <script>
        const caseStudy = document.querySelector('#case_study')
        const blocks = []

        {% for block in case_study.body %}
        blocks.push(
            {
                type: '{{ block.block_type }}',
                content: `{{ block }}`,
            }
        )
        {% endfor %}

        magna.createCaseStudy({
            element: caseStudy,
            content: {
                heading: '{{ case_study.lead_title }}',
                company: '{{ case_study.summary_context }}',
                blocks: blocks,
            }
        })
    </script>
{% endblock %}
{% endif %}
