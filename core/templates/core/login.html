{% extends 'core/page_no_navigation.html' %}
{% load breadcrumbs from great_components %}
{% load get_intended_destination from url_tags %}
{% load static %}

{% block inner_content %}
    <div id="login"></div>
{% endblock %}

{% block body_js %}
    {{ block.super }}

    {% get_intended_destination request as onward_destination %}

    <script type="text/javascript">
        var element = document.getElementById('login');
        var email = '{{ request.GET.email }}';
        var errorMsg = 'This email address is already registered. \
                       Use the social account you signed up with or reset your password.'
        var error = `{% if request.GET.email %}${errorMsg}{% endif %}`;
        magna.createLogin({
            element: element,
            isOpen: true,
            nextUrl: '{{onward_destination}}',
            email: email,
            errors: (error) ? {'__all__': [error]} : {}
        })
    </script>
{% endblock %}
{% block body_footer %}
{% endblock %}
