{% load content_tags %}
{% load component_tags %}
{% load wagtailcore_tags wagtailimages_tags %}
{% load add_govuk_classes from content_tags %}

<div class="microsite-main {{ view.slug }}-microsite">
  {% include 'microsites/includes/microsite_nav.html' with title=page.get_site_title  menu_items=page.get_menu_items active_url=request.path %}

  {% image page.hero_image original as hero_image %}

  {% if hero_image %}
  <div class="great-full-width-header-image" style="background-image: url({{ hero_image.url }})"></div>
  {% endif %}

  <div class="container govuk-!-padding-top-7">
    <div class="govuk-grid-row great-floating-right-column">
      <div class="govuk-grid-column-three-quarters govuk-!-margin-bottom-7">
        {% if page.page_title %}
          <h1 class="govuk-heading-xl govuk-!-margin-bottom-4">{{ page.page_title }}</h1>
        {% endif %}

        {% if page.page_subheading %}
          <p class="govuk-heading-m great-font-size-28 great-max-width-75">{{ page.page_subheading }}</p>
        {% endif %}

        {% if page.last_published_at %}
          <p class="govuk-body great-text-grey">
            Last updated: <time datetime="{{page.last_published_at|date:'c'}}">{{page.last_published_at|date:"j F Y"}}</time>
          </p>
        {% endif %}
      </div>
      <div class="govuk-grid-column-one-quarter">
        {% block related_content %}
          {% include 'microsites/includes/microsite_related_content_list.html' %}
        {% endblock %}
      </div>
    </div>
    {% filter add_govuk_classes %}
    {%include 'domestic/includes/streamfield.html' with streamfield_content=page.page_body  form_class='govuk-grid-column-two-thirds'%}
    {% endfilter %}
    {% block related_ctas %}
      {% if page.cta_title or page.cta_teaser or page.cta_link_label and page.cta_link %}
        {% include 'microsites/blocks/cta.html' with title=page.cta_title teaser=page.cta_teaser link=page.cta_link link_label=page.cta_link_label %}
      {% endif %}
    {% endblock %}

    {% block microsite_footer %}{% endblock %}
  </div>
</div>
