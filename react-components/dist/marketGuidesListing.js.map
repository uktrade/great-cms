{"version":3,"file":"marketGuidesListing.js","mappings":"2CACA,IAAIA,EAAsB,CCA1B,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3E,EAAwB,CAACM,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,qJC4DlF,SACEI,cA7DwB,e,EAAA,G,EAAA,yBAAG,WAAOC,GAAP,iGACrBC,EAAUC,KAAKC,MACnBC,SAASC,eAAe,8BAA8BC,aAGlDC,EAAS,IAAIC,WAAWC,aALH,SAOTC,eAAeC,UAC/B,CACEC,eAAgBZ,GAElB,CACEa,UAAW,oBACXC,OAAQ,CAAC,EAAE,GACXC,KAAM,EACNC,QAAS,EACTC,MAAO,uBACPC,YAAY,EACZC,YAAY,EACZC,iBAAiB,IAnBM,QAOrBC,EAPqB,QAuBvBC,WACF,IAAId,WAAWe,kBAAkB,CAAEC,aAAa,IAChD,aAGFH,EAAIC,WAAW,IAAId,WAAWiB,kBAAqB,aAEnDxB,EAAQyB,SAAQ,SAAUC,GACxB,IAAMC,EAASD,EAAOE,OAAOC,MAAM,KAAKT,IAAIU,YAAYC,UAExD,IACEzB,EAAO0B,OAAOL,GACd,SAEA,YADAM,QAAQC,MAAM,qCAAsCR,EAAOS,SAI7D,IAAMC,EAAKjC,SAASkC,cAAc,OAClCD,EAAGE,UAAY,uBAEf,IAAIC,EAAc,YAAcb,EAAOc,IAAM,KAC7CD,GAAe,gBAAkBb,EAAOS,QAAU,QAClDI,GAAe,OAEf,IAAIhC,WAAWkC,OAAOL,GACnBM,UAAUf,GACVgB,SACC,IAAIpC,WAAWqC,MAAM,CAAEC,aAAa,IAASC,QAAQP,IAEtDQ,MAAM3B,MAGPd,EAAO0C,QACT5B,EAAI6B,UAAU3C,EAAQ,CAAE4C,QAAS,GAAIC,QAAS,IAxDrB,2C,+KAAH,uD","sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/./core/js/marketGuidesListing.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export const initializeMap = async (cognitoPoolId) => {\n  const markets = JSON.parse(\n    document.getElementById('market-guides-results-json').textContent\n  )\n  const ukCentre = [-3.425, 55.37]\n  const bounds = new maplibregl.LngLatBounds()\n\n  const map = await AmazonLocation.createMap(\n    {\n      identityPoolId: cognitoPoolId,\n    },\n    {\n      container: 'market-guides-map',\n      center: [0,0],\n      zoom: 1,\n      minZoom: 0,\n      style: 'OpportunitiesListing',\n      dragRotate: false,\n      touchPitch: false,\n      pitchWithRotate: false,\n    }\n  )\n\n  map.addControl(\n    new maplibregl.NavigationControl({ showCompass: false }),\n    'top-right'\n  )\n\n  map.addControl(new maplibregl.FullscreenControl(), 'top-right')\n\n  markets.forEach(function (market) {\n    const lngLat = market.latlng.split(',').map(parseFloat).reverse()\n\n    try {\n      bounds.extend(lngLat)\n    } catch {\n      console.error('Error parsing lat/long for market:', market.heading)\n      return\n    }\n\n    const el = document.createElement('div');\n    el.className = 'market-guides-marker';\n\n    let popupMarkup = '<a href=\"' + market.url + '\">'\n    popupMarkup += '<h3 class=\"\">' + market.heading + '</h3>'\n    popupMarkup += '</a>'\n\n    new maplibregl.Marker(el)\n      .setLngLat(lngLat)\n      .setPopup(\n        new maplibregl.Popup({ closeButton: false }).setHTML(popupMarkup)\n      )\n      .addTo(map)\n  })\n\n  if (bounds.length) {\n    map.fitBounds(bounds, { padding: 20, maxZoom: 8 })\n  }\n}\n\nexport default {\n  initializeMap,\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","initializeMap","cognitoPoolId","markets","JSON","parse","document","getElementById","textContent","bounds","maplibregl","LngLatBounds","AmazonLocation","createMap","identityPoolId","container","center","zoom","minZoom","style","dragRotate","touchPitch","pitchWithRotate","map","addControl","NavigationControl","showCompass","FullscreenControl","forEach","market","lngLat","latlng","split","parseFloat","reverse","extend","console","error","heading","el","createElement","className","popupMarkup","url","Marker","setLngLat","setPopup","Popup","closeButton","setHTML","addTo","length","fitBounds","padding","maxZoom"],"sourceRoot":""}