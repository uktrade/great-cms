{"version":3,"file":"marketGuidesListing.js","mappings":"2CACA,IAAIA,EAAsB,CCA1B,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3E,EAAwB,CAACM,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,qJC8HlF,SACEI,cAtDwB,e,EAAA,G,EAAA,yBAAG,WAAOC,GAAP,mGACrBC,EAAUC,KAAKC,MACnBC,SAASC,eAAe,8BAA8BC,aAElDC,EAAW,EAAE,MAAO,OACpBC,EAAS,IAAIC,WAAWC,aALH,SAOTC,eAAeC,UAC/B,CACEC,eAAgBb,GAElB,CACEc,UAAW,oBACXC,OAAQR,EACRS,KAAM,EACNC,QAAS,EACTC,MAAO,uBACPC,YAAY,EACZC,YAAY,EACZC,iBAAiB,IAnBM,QAOrBC,EAPqB,QAuBvBC,WACF,IAAId,WAAWe,kBAAkB,CAAEC,aAAa,IAChD,gBAGFxB,EAAQyB,SAAQ,SAAUC,GACxB,IAAMC,EAASD,EAAOE,OAAOC,MAAM,KAAKR,IAAIS,YAAYC,UAExD,IACExB,EAAOyB,OAAOL,GACd,SAEA,YADAM,QAAQC,MAAM,qCAAsCR,EAAOS,SAI7D,IAAIC,EAAc,YAAcV,EAAOW,IAAM,KAC7CD,GAAe,gBAAkBV,EAAOS,QAAU,QAClDC,GAAe,QAEf,IAAI5B,WAAW8B,QACZC,UAAUZ,GACVa,SACC,IAAIhC,WAAWiC,MAAM,CAAEC,aAAa,IAASC,QAAQP,IAEtDQ,MAAMvB,MAGXA,EAAIwB,UAAUtC,EAAQ,CAAEuC,QAAS,GAAIC,QAAS,IAlDnB,0C,+KAAH,uD","sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/./core/js/marketGuidesListing.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const style = {\n  version: 8,\n  sources: {\n    esri: {\n      attribution:\n        'Esri, HERE, Garmin, FAO, NOAA, USGS, Â© OpenStreetMap contributors, and the GIS User Community',\n      maxzoom: 15,\n      tiles: [\n        'https://maps.geo.eu-west-1.amazonaws.com/maps/v0/maps/OpportunitiesListing/tiles/{z}/{x}/{y}',\n      ],\n      type: 'vector',\n    },\n  },\n  sprite:\n    'https://maps.geo.eu-west-1.amazonaws.com/maps/v0/maps/OpportunitiesListing/sprites/sprites',\n  glyphs:\n    'https://maps.geo.eu-west-1.amazonaws.com/maps/v0/maps/OpportunitiesListing/glyphs/{fontstack}/{range}.pbf',\n  layers: [\n    {\n      filter: ['==', '_symbol', 0],\n      id: 'Land',\n      layout: {},\n      minzoom: 0,\n      paint: {\n        'fill-color': '#cbd2d3',\n      },\n      source: 'esri',\n      'source-layer': 'Land',\n      type: 'fill',\n    },\n    {\n      filter: ['==', '_symbol', 1],\n      id: 'Land/Ice',\n      layout: {},\n      minzoom: 0,\n      paint: {\n        'fill-color': '#cbd2d3',\n      },\n      source: 'esri',\n      'source-layer': 'Land',\n      type: 'fill',\n    },\n    {\n      id: 'Marine area/bathymetry depth 1',\n      layout: {},\n      minzoom: 0,\n      paint: {\n        'fill-color': '#DCF3FC',\n      },\n      source: 'esri',\n      'source-layer': 'Marine area',\n      type: 'fill',\n    },\n    {\n      filter: ['all', ['==', '_symbol', 0]],\n      id: 'Boundary line/Admin0/line',\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#bababa',\n        'line-width': 1.2,\n      },\n      source: 'esri',\n      'source-layer': 'Boundary line',\n      type: 'line',\n    },\n  ],\n  created: '0001-01-01T00:00:00Z',\n  modified: '0001-01-01T00:00:00Z',\n}\n\nexport const initializeMap = async (cognitoPoolId) => {\n  const markets = JSON.parse(\n    document.getElementById('market-guides-results-json').textContent\n  )\n  const ukCentre = [-3.425, 55.37]\n  const bounds = new maplibregl.LngLatBounds()\n\n  const map = await AmazonLocation.createMap(\n    {\n      identityPoolId: cognitoPoolId,\n    },\n    {\n      container: 'market-guides-map',\n      center: ukCentre,\n      zoom: 0,\n      minZoom: 0,\n      style: 'OpportunitiesListing',\n      dragRotate: false,\n      touchPitch: false,\n      pitchWithRotate: false,\n    }\n  )\n\n  map.addControl(\n    new maplibregl.NavigationControl({ showCompass: false }),\n    'bottom-right'\n  )\n\n  markets.forEach(function (market) {\n    const lngLat = market.latlng.split(',').map(parseFloat).reverse()\n\n    try {\n      bounds.extend(lngLat)\n    } catch {\n      console.error('Error parsing lat/long for market:', market.heading)\n      return\n    }\n\n    let popupMarkup = '<a href=\"' + market.url + '\">'\n    popupMarkup += '<h3 class=\"\">' + market.heading + '</h3>'\n    popupMarkup += '</a>'\n\n    new maplibregl.Marker()\n      .setLngLat(lngLat)\n      .setPopup(\n        new maplibregl.Popup({ closeButton: false }).setHTML(popupMarkup)\n      )\n      .addTo(map)\n  })\n\n  map.fitBounds(bounds, { padding: 20, maxZoom: 8 })\n}\n\nexport default {\n  initializeMap,\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","initializeMap","cognitoPoolId","markets","JSON","parse","document","getElementById","textContent","ukCentre","bounds","maplibregl","LngLatBounds","AmazonLocation","createMap","identityPoolId","container","center","zoom","minZoom","style","dragRotate","touchPitch","pitchWithRotate","map","addControl","NavigationControl","showCompass","forEach","market","lngLat","latlng","split","parseFloat","reverse","extend","console","error","heading","popupMarkup","url","Marker","setLngLat","setPopup","Popup","closeButton","setHTML","addTo","fitBounds","padding","maxZoom"],"sourceRoot":""}