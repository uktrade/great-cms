{"version":3,"file":"marketGuidesListing.js","mappings":"+CACIA,EAAsB,CCA1B,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3E,EAAwB,CAACM,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,ICG9EI,EAAsB,G,kzQCGnB,IAAMC,EAAc,SAACC,EAAMC,GAChC,IAAIC,EAAUF,EACVG,EAAU,EAEd,GAAIF,EAASG,OAAQ,CAEnB,IAAMC,EAAkBL,EAAKM,QAAO,SAAAC,GAAC,OAAIN,EAASO,SAASD,MACrDE,EAAST,EAAKM,QAAO,SAAAC,GAAC,OAAKN,EAASO,SAASD,MACnDL,EAAU,GAAH,SAAOG,GAAP,EAA2BI,IAClCN,EAAUE,EAAgBD,OAG5B,IAAMM,EAAeR,EAAQS,MAAM,EAAGR,GAChCS,EAAgBV,EAAQS,MAAMR,GAMpC,OAJ6B,IAAzBS,EAAcR,QAChBM,EAAaG,KAAKD,EAAcE,OAG9BF,EAAcR,OAChB,UAAUM,EAAaK,KAAK,MAA5B,gBAAyCH,EAAcR,OAAvD,SACSM,EAAaN,QAAU,EACzBM,EAAaK,KAAK,SAEzB,UAAUL,EAAaC,MAAM,GAAK,GAAGI,KAAK,MAA1C,gBAAuDL,EAAaA,EAAaN,OAAS,KAkE9F,SACEY,cA/DwB,e,EAAA,G,EAAA,yBAAG,WAAOC,EAAeC,GAAtB,6GAA+BjB,EAA/B,+BAA0C,GAA1C,SACTkB,eAAeC,UAC/B,CACEC,eAAgBJ,GAElB,CACEK,UAAW,oBACXC,OAAQ,CAAC,EAAE,IACXC,KAAM,EACNC,QAAS,EACTC,QAAS,EACTC,MAAOC,EACPC,YAAY,EACZC,YAAY,EACZC,iBAAiB,IAdM,QACrBC,EADqB,QAkBvBC,WACF,IAAIC,WAAWC,kBAAkB,CAAEC,aAAa,IAChD,aAGFJ,EAAIC,WAAW,IAAIC,WAAWG,kBAAqB,aAE7CC,EAAS,IAAIJ,WAAWK,aAE9BrB,EAAQsB,SAAQ,SAAUC,GACxB,IAAMC,EAASD,EAAOE,OAAOC,MAAM,KAAKZ,IAAIa,YAAYC,UAExD,IACER,EAAOS,OAAOL,GACd,SAEA,YADAM,QAAQC,MAAM,qCAAsCR,EAAOS,SAI7D,IAAMC,EAAKC,SAASC,cAAc,OAClCF,EAAGG,UAAY,uBAEf,IAAMtD,EAAOD,EAAY0C,EAAOzC,KAAMC,GAElCsD,EAAc,wCAA0Cd,EAAOe,IAAM,KACzED,GAAe,6BAA+Bd,EAAOS,QAAU,QAC3DlD,IACFuD,GAAe,wBAA0BvD,EAAO,QAElDuD,GAAe,OAEf,IAAIrB,WAAWuB,OAAON,GACnBO,UAAUhB,GACViB,SACC,IAAIzB,WAAW0B,MAAM,CAAEC,aAAa,IAASC,QAAQP,IAEtDQ,MAAM/B,MAGPd,EAAQd,QACV4B,EAAIgC,UAAU1B,EAAQ,CAAE2B,QAAS,GAAIvC,QAAS,IA1DrB,0C,+KAAH,0DD9B1BwC,CAA0B,EAAGpE,EAAqBd,G","sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/startup","webpack://[name]/./core/js/marketGuidesListing.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module doesn't tell about it's top-level declarations so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[9281](0, __webpack_exports__, __webpack_require__);\n","import descriptor from './map-style-descriptor.json'\n\n// Land: #f1f1f1\n// Water: #ccd2d3\n// Borders and text: #333333\n\nexport const listSectors = (tags, selected) => {\n  let sectors = tags\n  let splitAt = 2\n\n  if (selected.length) {\n    // Move non-selected sectors to the end of the list\n    const selectedMatches = tags.filter(x => selected.includes(x))\n    const others = tags.filter(x => !selected.includes(x))\n    sectors = [...selectedMatches, ...others]\n    splitAt = selectedMatches.length\n  }\n\n  const shownSectors = sectors.slice(0, splitAt)\n  const hiddenSectors = sectors.slice(splitAt)\n\n  if (hiddenSectors.length === 1) {\n    shownSectors.push(hiddenSectors.pop())\n  }\n\n  if (hiddenSectors.length) {\n    return `${shownSectors.join(', ')} and ${hiddenSectors.length} more`\n  } else if (shownSectors.length <= 2) {\n    return shownSectors.join(' and ')\n  } else {\n    return `${shownSectors.slice(0, - 1).join(', ')} and ${shownSectors[shownSectors.length - 1]}`\n  }\n}\n\nexport const initializeMap = async (cognitoPoolId, markets, selected = []) => {\n  const map = await AmazonLocation.createMap(\n    {\n      identityPoolId: cognitoPoolId,\n    },\n    {\n      container: 'market-guides-map',\n      center: [0,20],\n      zoom: 1,\n      minZoom: 1,\n      maxZoom: 4,\n      style: descriptor,\n      dragRotate: false,\n      touchPitch: false,\n      pitchWithRotate: false,\n    }\n  )\n\n  map.addControl(\n    new maplibregl.NavigationControl({ showCompass: false }),\n    'top-right'\n  )\n\n  map.addControl(new maplibregl.FullscreenControl(), 'top-right')\n\n  const bounds = new maplibregl.LngLatBounds()\n\n  markets.forEach(function (market) {\n    const lngLat = market.latlng.split(',').map(parseFloat).reverse()\n\n    try {\n      bounds.extend(lngLat)\n    } catch {\n      console.error('Error parsing lat/long for market:', market.heading)\n      return\n    }\n\n    const el = document.createElement('div');\n    el.className = 'market-guides-marker';\n\n    const tags = listSectors(market.tags, selected)\n\n    let popupMarkup = '<a class=\"markets-map-infobox\" href=\"' + market.url + '\">'\n    popupMarkup += '<h3 class=\"heading-small\">' + market.heading + '</h3>'\n    if (tags) {\n      popupMarkup += '<p>High potential in ' + tags + '</p>'\n    }\n    popupMarkup += '</a>'\n\n    new maplibregl.Marker(el)\n      .setLngLat(lngLat)\n      .setPopup(\n        new maplibregl.Popup({ closeButton: false }).setHTML(popupMarkup)\n      )\n      .addTo(map)\n  })\n\n  if (markets.length) {\n    map.fitBounds(bounds, { padding: 40, maxZoom: 4 })\n  }\n}\n\nexport default {\n  initializeMap,\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","__webpack_exports__","listSectors","tags","selected","sectors","splitAt","length","selectedMatches","filter","x","includes","others","shownSectors","slice","hiddenSectors","push","pop","join","initializeMap","cognitoPoolId","markets","AmazonLocation","createMap","identityPoolId","container","center","zoom","minZoom","maxZoom","style","descriptor","dragRotate","touchPitch","pitchWithRotate","map","addControl","maplibregl","NavigationControl","showCompass","FullscreenControl","bounds","LngLatBounds","forEach","market","lngLat","latlng","split","parseFloat","reverse","extend","console","error","heading","el","document","createElement","className","popupMarkup","url","Marker","setLngLat","setPopup","Popup","closeButton","setHTML","addTo","fitBounds","padding","__webpack_modules__"],"sourceRoot":""}