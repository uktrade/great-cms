@use '../../../styles/sizes/sizes' as sizes;

$gap: 30px;

.govuk-phase-banner {
	border: none;
}

.great-breadcrumbs {
	background: white;
}

.govuk-main-wrapper {
	padding: 0;
	background-color: $great-light-blue;
}

.great-container {
		/*
		The selector has position: static, which makes it always appear
		behind the hero and z-index has no effect on it because of that.
		*/
		position: relative;
}

.great-ds-title-arrow__text {
	// This is to remove the double underline if this is applied to a link.
	// For this to work, the link must be an ancestor of this element.
	text-decoration: none;
}

@mixin display-contents-on-small-screens {
	display: contents;

	@media (min-width: sizes.$tablet-size) {
		display: initial;
	}
}

@mixin vertical-spacer {
	@media (min-width: sizes.$tablet-size) {
		display: flex;
		flex-direction: column;
		gap: var(--vertical-gap);
	}
}

@mixin shadow-thrower {
	background: white;
	box-shadow: 0 4px 10px #04043F1A;
}

.dynamic-guide {
	// The only purpose of this selector is to hold the following variables
	// so we use this to make it not participate in the layout.
	display: contents;

	--vertical-gap: 15px;
	--grid-side-margin: calc(var(--vertical-gap) * 2);
	--hero-image-height: 80px;
	--vertical-padding: 15px;

	@media (min-width: sizes.$tablet-size) {
		--hero-image-height: 270px;
		--vertical-padding: 30px;
		--vertical-gap: 30px;
	}

	@media (min-width: sizes.$donknowhowtonameit-size) {
		--hero-image-height: 450px;
	}

	&__hero-image {
		position: absolute;
		width: 100%;
		height: var(--hero-image-height);
		background: url("/static/images/international-dynamic-guide-hero.jpg") no-repeat center center;
		background-size: cover;
	}

	&__grid {
		// This is required for the grid to participate in the z-index
		// so that hero-image appears behind it.
		position: relative;
		display: grid;
		grid-template:
			"top"
			"left"
			"right";
		row-gap: var(--vertical-gap);
		column-gap: $gap;
		padding: 80px 0;

		@media (min-width: sizes.$tablet-size) {
			width: min(calc(100% - var(--grid-side-margin)), sizes.$content-max-width);
			margin: auto;
			grid-template:
				"top top"
				"left right"
				/ 2fr 1fr;
		}

		@media (min-width: sizes.$donknowhowtonameit-size) {
			padding-top: 188px;
		}
	}

	&__hero {
		grid-area: hero;
	}

	&__edit-link {
		display: flex;
		align-items: baseline;
		gap: 10px;

		& > svg {
			transform: translateY(4px);
		}
	}

	&__region-map {
		display: none;

		@media (min-width: sizes.$tablet-size) {
			display: initial;
			grid-area: region-map;
			background-image: url("/static/svg/regions/uk-all.svg");
			background-size: contain;
			background-repeat: no-repeat;
			background-position-x: right;
			background-position-y: top;
		}
	}

	&__panel {
		&-top {
			@include shadow-thrower();
			grid-area: top;
			display: grid;
			grid-template-columns: subgrid;
			grid-template-areas: "hero region-map";
			padding: 20px var(--vertical-padding) 25px;
		}

		&-left {
			@include display-contents-on-small-screens();
			@include vertical-spacer();
			grid-area: left;
		}

		&-right {
			@include display-contents-on-small-screens();
			@include vertical-spacer();
			grid-area: right;
		}
	}

	&__section {
		@include shadow-thrower();
	}
}

.essential-topics {
	padding: 15px var(--vertical-padding) 25px;
	display: flex;
	flex-direction: column;
	gap: 15px;

	@media (min-width: sizes.$tablet-size) {
		padding: 30px;
		gap: 20px;
	}

	&__list {
		display: grid;
		gap: 20px;
		margin: 0;
		padding: 0;

		@media (min-width: sizes.$tablet-size) {
			grid-template-columns: 1fr 1fr;
			gap: 30px;
		}
	}

	&__item {
		display: flex;
    align-items: center;
    gap: 15px;
		border: 2px solid #bdbdbd;
    border-radius: 10px;
    list-style: none;
    padding: 15px;
		font-weight: bold;

		@media (min-width: sizes.$tablet-size) {
			flex-direction: column;
			align-items: flex-start;
		}

		@media (min-width: sizes.$donknowhowtonameit-size) {
			flex-direction: row;
			align-items: center;
		}
	}

	&__icon {
		width: 60px;
	}
}

.section {

	& > * {
		padding: 20px var(--vertical-padding);

		@media (min-width: sizes.$tablet-size) {
			padding: 30px var(--vertical-padding);
		}

		&:not(:last-child) {
			border-bottom: 1px solid #bdbdbd;
		}
	}

	&__header {
		padding-bottom: 15px;

		& .govuk-body {
			margin: 0;
		}
	}

	&--left {
		&__header {
			& .govuk-heading-l {
				margin-bottom: 15px;
			}
		}
	}

	&--find-a-consultant {
		padding: 15px 0 20px;

		@media (min-width: sizes.$tablet-size) {
			padding: 30px 0;
		}

		// The double & increases the selector's specificity so we don't have to
		// use !important
		&#{&} > * {
			border-bottom: none;
			padding-top: 0;
			padding-bottom: 0;
		}
	}

	&--right {
		& > * {
			// The horizontal padding of 20px is inconsistent with the cards in the
			// left column which have padding 15px.
			padding: 15px 20px 25px;

			@media (min-width: sizes.$tablet-size) {
				padding: 20px 30px 30px;
			}
		}

		.section {
			&__header {
				display: flex;
				flex-direction: row;
				justify-content: space-between;
				align-items: center;
				gap: 10px;
				padding-bottom: 15px;

				@media (min-width: sizes.$tablet-size) {
					padding-bottom: 20px;
					flex-direction: column-reverse;
					align-items: flex-start;
				}
			}

			&__heading {
				// Override govuk-heading-m margin
				margin: 0;
			}
		}
	}
}

.link-list {
	list-style: none;
	margin: 0;

	&__item {
		margin: 0;
		padding: 15px 0;
		border-bottom: 1px solid #bdbdbd;

		&:first-child {
			padding-top: 0;
		}

		&:last-child {
			padding-bottom: 0;
			border-bottom: none;
		}

		& > *:not(:first-child) {
			margin-bottom: 0;
		}
	}
}
