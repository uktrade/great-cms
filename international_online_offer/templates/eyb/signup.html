{% extends './base.html' %}
{% load static %}

{% block head_title %}Sign up {{ block.super }}{% endblock %}

{% block head_other %}
  <meta
    name="description"
    content="Find information to help invest within the UK"
  />
{% endblock %}

{% block content %}
<div class="govuk-width-container">
  {% if form.non_field_errors %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-error-summary" data-module="govuk-error-summary">
        <div role="alert">
          <h2 class="govuk-error-summary__title">
            There is a problem
          </h2>
          <div class="govuk-error-summary__body">
            <ul class="govuk-list govuk-error-summary__list">
              <li>
                <a href="#">{{form.non_field_errors}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% else %}
      {% include './includes/error_summary.html' %}
  {% endif %}
  {% if not form.code_confirm %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">Create your account</h1>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <p class="govuk-body-m">Already have an account? <a href="{% url 'international_online_offer:login' %}" class="govuk-link">Sign in</a></p>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form method="post">
        {% csrf_token %}
        <div class="govuk-grid-row govuk-!-margin-bottom-3">
          <div class="govuk-grid-column-full">
            <div class="{% if form.email.errors %} govuk-form-group--error{% endif %}">
              {% include './includes/form_field.html' with field=form.email %}
            </div>
          </div>
        </div>
        <div class="govuk-grid-row govuk-!-margin-bottom-7">
          <div class="govuk-grid-column-full">
            <div class="{% if form.password.errors %} govuk-form-group--error{% endif %}">
              {% include './includes/form_field.html' with field=form.password %}
            </div>
          </div>
        </div>
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">
            {% include './includes/submit_button.html' with button_text='Sign up'  %}
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="govuk-grid-row govuk-!-margin-top-4">
    <div class="govuk-grid-column-two-thirds">
      <p class="govuk-body">By signing up, you agree to our
        <a class="govuk-link" href="/terms-and-conditions/">terms and conditions</a> and
        <a class="govuk-link" href="/privacy-and-cookies/">privacy notice</a>
      </p>
    </div>
  </div>
  {% else %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds govuk-!-margin-bottom-3">
        <div id="sign-up-confirm">
          <h1 class="govuk-heading-l">Verify your email address</h1>
          <p class="govuk-body">We've sent a code to your email address.
            Don't forget to check your spam folder if you can't see it.
            Enter the code below to complete registration:</p>
            <form method="post">
              {% csrf_token %}
              <div class="govuk-grid-row govuk-!-margin-bottom-7">
                <div class="govuk-grid-column-full">
                  <div class="{% if form.code_confirm.errors %} govuk-form-group--error{% endif %}">
                    {% include './includes/form_field.html' with field=form.code_confirm %}
                  </div>
                </div>
              </div>
              <div class="govuk-grid-row govuk-!-margin-bottom-3">
                <div class="govuk-grid-column-full">
                  {% include './includes/submit_button.html' with button_text='Continue'  %}
                </div>
              </div>
            </form>
        </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}

{% block body_js %}
  {{ block.super }}
{% endblock %}
