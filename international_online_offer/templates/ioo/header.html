{% load static %}
{% load ga360_data from directory_components %}
<header data-ga-section="header">
    <div class="atlas-header__global">
        <div class="atlas-container atlas-container--wide">
            <img height="30" alt="Department for Business and Trade"
                 src="{% static 'images/dbt-red-footer-logo.93fc9e99b781.svg' %}">
        </div>
    </div>
    <div class="atlas-header__main">
        <div class="atlas-container atlas-container--wide atlas-header__main-inner">
            {% ga360_data "a" value="logo" %}
                <a class="atlas-header__logo" href="{% url 'international_online_offer:index' %}">
                    <img src="{% static 'images/great.png' %}"
                         alt="Great Britain and Northern Ireland"/>
                </a>
            {% end_ga360_data %}

            {% if request.user.is_authenticated %}
            <button id="atlas-nav-toggle" class="atlas-menu-button" aria-controls="atlas-nav" data-reveal-button>
                Menu
                <span class="atlas-menu-button__icon"></span>
            </button>
            {% endif %}

            {% if not request.user.is_authenticated %}
            <nav id="atlas-nav-flat" class="atlas-nav-flat" aria-label="Main menu">
                <ul class="atlas-nav__list-flat">
                    <li>
                        <a class="atlas-nav__item" style="cursor: pointer;" href="{% url 'international_online_offer:login' %}">Sign in</a>
                    </li>
                </ul>
            </nav>
            {% endif %}

            <nav id="atlas-nav" class="atlas-nav" aria-label="Main menu" aria-expanded="false">
                <ul class="atlas-nav__list atlas-list--bare">
                    {% if request.user.is_authenticated %}
                        <script>
                            const signOut = () => {
                            return fetch('{% url "sso:business-sso-logout-api" %}', {
                                method: 'post',
                                headers: {
                                Accept: 'application/json',
                                'Content-Type': 'application/json',
                                'X-CSRFToken': '{{ csrf_token }}',
                                'X-Requested-With': 'XMLHttpRequest',
                                },
                                body: JSON.stringify({})
                            }).then(function() {
                                window.location = '/international/expand-your-business-in-the-uk/login';
                            });
                            }
                        </script>
                        {% if user.full_name %}
                        <li class="atlas-nav__list-header">
                            Hi {{user.full_name}}
                        </li>
                        {% endif %}
                        <li>
                            <a class="atlas-nav__item" href="/international/expand-your-business-in-the-uk/guide" style="cursor: pointer;">UK Expansion guide</a>
                        </li>
                        <li>
                            <a class="atlas-nav__item" href="{% url 'international_online_offer:profile' %}" style="cursor: pointer;">Edit profile</a>
                        </li>
                        <li>
                            <a class="atlas-nav__item" href="{% url 'international_online_offer:edit-your-answers' %}" style="cursor: pointer;">Edit answers</a>
                        </li>
                        <li>
                            <a class="atlas-nav__item" style="cursor: pointer;" onclick="signOut()">Sign out</a>
                        </li>
                    {% else %}

                    {% endif %}
                </ul>
            </nav>
        </div>
    </div>
</header>
