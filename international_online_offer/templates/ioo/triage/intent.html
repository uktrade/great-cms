{% extends '../base.html' %}
{% load static %}

{% block head_other %}
  <meta
    name="description"
    content="Find information to help invest within the UK"
  />
{% endblock %}

{% block head_css %}
  {{ block.super }}
{% endblock %}

{% block content %}
  {% include '../includes/triage_header.html' with back_url=back_url step_text=step_text question_text=question_text %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form method="post" onsubmit="return onSubmitIntent()">
        {% csrf_token %}
        <div class="form-group">
          <div class="govuk-hint govuk-!-margin-bottom-3">Choose one or more options from the list</div>
          <div id="id_intent_container">
            {% include 'core/includes/form_field.html' with field=form.intent %}
          </div>
          <div id="id_intent_other-container" class="govuk-inset-text">
            <span class='govuk-body'>Type your answer</span>
            {% include 'core/includes/form_field.html' with field=form.intent_other %}
          </div>
          {% include '../includes/submit_button.html' with button_text='Continue'  %}
        </div>
      </form>
    </div>
  </div>
  {% include '../includes/triage_footer.html' with why_we_ask_this_question_text=why_we_ask_this_question_text %}
{% endblock %}

{% block body_js %}
  {{ block.super }}
  <script type="text/javascript" src="{% static 'javascript/dit.components.toggleOther.js' %}"></script>
  <script type="text/javascript" src="{% static 'javascript/international-online-offer.js' %}"></script>
  <script type="text/javascript">
    const intentContainer = document.getElementById('id_intent_container');
    const otherInputs = document.getElementById('id_intent_other-container');
    const checkboxContainer = document.getElementById('intent-select');
    const checkboxElements = checkboxContainer.querySelectorAll('input[type=checkbox]');
    const otherCheckboxElement = document.getElementById('intent-select_5');

    GOVUK.utils.toggleRadioOtherOnClick(otherCheckboxElement, otherInputs);
    GOVUK.utils.toggleFieldsetClassOnClick(
        [intentContainer],
        otherCheckboxElement
    );

    otherCheckboxElement.addEventListener("change", (e) => {
        if (otherCheckboxElement.checked == false) {
          document.getElementById('id_intent_other').value = '';
        }
    })

    getIntentIfPreviouslySelected();
  </script>
{% endblock %}
